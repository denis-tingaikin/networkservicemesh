---
executions:
  - name: "Interdomain suite packet-aws"
    env:
      - SAVE_ARTIFACTS_AS_FILES=true
      - ARCHIVE_ARTIFACTS=true
    source:
      tags:
        - interdomain_suite
    root: ./test/integration
    timeout: 600
    cluster-count: 2
    cluster-selector:
      - packet
      - aws
    kubernetes-env:
      - KUBECONFIG_CLUSTER_1
      - KUBECONFIG_CLUSTER_2
    on_fail: |
      make k8s-delete-nsm-namespaces
    after: |
      make k8s-delete-nsm-namespaces

  - name: "Interdomain suite gke-packet"
    env:
      - STORE_POD_LOGS_IN_FILES=true
      - USE_JAEGER_SERVICE=true
    source:
      tags:
        - interdomain_suite
    root: ./test/integration
    timeout: 600
    cluster-count: 2
    cluster-selector:
      - gke
      - packet
    kubernetes-env:
      - KUBECONFIG_CLUSTER_1
      - KUBECONFIG_CLUSTER_2
    on_fail: |
      make k8s-delete-nsm-namespaces
    after: |
      make k8s-delete-nsm-namespaces

  - name: "Interdomain suite azure-gke"
    env:
      - STORE_POD_LOGS_IN_FILES=true
      - USE_JAEGER_SERVICE=true
    source:
      tags:
        - interdomain_suite
    root: ./test/integration
    timeout: 600
    cluster-count: 2
    cluster-selector:
      - azure
      - gke
    kubernetes-env:
      - KUBECONFIG_CLUSTER_1
      - KUBECONFIG_CLUSTER_2
    on_fail: |
      make k8s-delete-nsm-namespaces
    after: |
      make k8s-delete-nsm-namespaces

  - name: "Interdomain suite aws-azure"
    env:
      - STORE_POD_LOGS_IN_FILES=true
      - USE_JAEGER_SERVICE=true
    source:
      tags:
        - interdomain_suite
    root: ./test/integration
    timeout: 600
    cluster-count: 2
    cluster-selector:
      - aws
      - azure
    kubernetes-env:
      - KUBECONFIG_CLUSTER_1
      - KUBECONFIG_CLUSTER_2
    on_fail: |
      make k8s-delete-nsm-namespaces
    after: |
      make k8s-delete-nsm-namespaces
