---
executions:
  - name: "Example-helm-vpn"
    kind: shell
    timeout: 300
    env:
      - NSM_NAMESPACE=nsm-system
      - CLUSTER_RULES_PREFIX=null
      - ARCHIVE_ARTIFACTS=true
      - ARTIFACTS_DIR=/home/circleci/project/.tests/cloud_test/$(cluster-name)/$(test-name)
      - SPIRE_ENABLED=false  # because spire is already installed
    kubernetes-env:
      - KUBECONFIG
    run: |
      test/shell/vpn_test.sh
    on-test-fail: |
      test/shell/on_fail.sh