---
executions:
  - name: "Example-helm-crossconnect-monitor"
    kind: shell
    timeout: 300
    env:
      - NSM_NAMESPACE=nsm-system
      - CLUSTER_RULES_PREFIX=null
      - ARCHIVE_ARTIFACTS=true
      - ARTIFACTS_DIR=/home/circleci/project/.tests/cloud_test/$(cluster-name)/$(test-name)
      - SPIRE_ENABLED=false  # because spire is already installed
      - CHECK_CMD=scripts/verify_crossconnect_monitor.sh
    kubernetes-env:
      - KUBECONFIG
    run: |
      test/shell/crossconnect_monitor_test.sh
    on_fail: |
      test/shell/on_fail.sh